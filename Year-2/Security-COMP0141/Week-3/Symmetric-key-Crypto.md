# Symmetric Key Cryptography
There are two sides to modern cryptography, symmetric and private key cryptography.

## Symmetric Cipher
Symmetric ciphers make use of a key shared between sender and recipient. There are two types of symmetric ciphers.

### Stream Cipher
In a `stream cipher` each bit is encrypted separately. They work by attempting to mimic the [[An-Introduction-to-Ciphers#One time Pad|one time pad]] by generating a long, pseudo-random key string from an `initialisation vector`  (a random number) and a fixed size key.

![[Pasted image 20220128181629.png]]

The generated key $r$ is then `XORed` with the message bit by bit to obtain the ciphertext. The Initialisation Vector does not need to be kept private but it does need to be switched between messages. Stream ciphers are extremely fast as key generation does not depend on the message being sent, so it can be generated prior to encryption. Some examples include "Chacha" and "Salsa 20" The initialisation vector is also sent along with the encrypted message so the recipient can decrypt the message.

#### Process
* Alice shares a key with Bob securely
* Alice generates an initialisation vector
* Alice generates a pseudo [[An-Introduction-to-Ciphers#One time Pad|one time pad]]
* Alice `XOR`s the message with the one time pad and sends it to Bob alongside with the initialisation vector
* Bob generates the same one time pad with the initialisation vector
* Bob decrypts the message.

### Block Ciphers
In a `block cipher` blocks of bits are encrypted. The key is a short random string used for each block of the message (128, 192 or 256). If the plain text is shorter than the key then it must be padded to match the key length. The goal is to encrypt blocks of text to same length blocks of ciphertext.
![[Pasted image 20220128182516.png]]

The same key can then be used to decrypt the message.

Block ciphers were developed to create the `Advanced Encryption Standard (AES)` - which is a specification for the encryption of data. 

Electronic code book method divides the message into blocks of the ciphers block size and encrypt each block individually with the same key. This however does not provide secrecy - if there are repeated blocks in the plain text then it will appear repeated in the plain text.

CBC (cipher block chaining) mode takes in a random initialisation vector and the first block. The output is the encryption for block one, which is then fed in as the "new" initialisation vector for block two, and so on.

## Key Establishment 
`Key Establishment` is the process of generating the key for two communicators. Key's can't just be sent across an insecure network as it is easy for adversaries to  steal the key, defeating it's purpose.
### Diffie-Hellman key exchange
* Person A sends $A$  to person B, where $A = g^a \mod{p}$ . $a$ is just a number generated by A randomly.
* Person B sends $B$  to person A, where $B = g^b \mod{p}$ . $b$ is just a number generated by B randomly.
* There is no way to compute $a$ or $b$ easily - it's requires an efficient solution to the [[Year-2/Security-COMP0141/Week-2/Math-and-Crypotgraphy|discrete logarithm problem]].
* Persons A and B can now easily compute $g^{ab}$ easily, which can be used as their key.
	* Alice exponentiates $B$ by $a$ to get $B^a = (g^a)^b$ 
	* Bob exponentiates $A$ by $a$ to get $A^b = (g^b)^a$ 
Values $a$ and $b$ are very large numbers (consisting of $2048$ bits).